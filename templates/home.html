<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹¬ì•¼ì‹ë‹¹</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <style>
        body{
            text-align: center;
        }
        .cover {
            display: flex;
            justify-content: space-between;
        }
        a {
            color: rgb(143, 18, 168);
            text-decoration: none;
        }
    </style>
</head>
<body class="d-flex justify-content-center">
    <div>
        <div class="d-flex justify-content-between mt-5">
            <p><strong>
                ì˜¤ëŠ˜ì€ 
                {% if today_yoil in ['ê¸ˆ','í† ','ì¼'] %}
                    <span class="ingredient" style="color: crimson;">
                        ğŸ”¥ë¶ˆíƒ€ëŠ”
                    </span>
                {% endif %}
                {{ today_yoil }}ìš”ì¼~ğŸ»
            </strong></p>
            <div class="d-flex justify-content-between"> 
                <a href="#" class="mx-3">ë¡œê·¸ì¸</a>
                <a href="#">íšŒì›ê°€ì…</a>
            </div>
        </div>
        <div class="d-flex justify-content-start">
            <p><strong>ê°€ë³´ì~!</strong></p>
        </div>
        <h1 class="center"><a href="/" style="color: black;">ì‹¬ì•¼ì‹ë‹¹</a></h1>
        <form method="get">
            <div class="d-flex justify-content-end">
                <!--? ì§€ì—­ í•„í„° -->
                {% if search %}
                    <input type="text" name="search" value="{{ search }}" style="width: 100px; height: 30px; margin-top: 4px">
                {% else %}
                    <input type="text" name="search" placeholder="ìƒì ëª… ì…ë ¥" style="width: 100px; height: 30px; margin-top: 4px">
                {% endif %}
                <select name="area" class="mx-1" style="width: 100px; height: 30px; margin-top: 4px">
                    <div>
                        {% if area %}
                            <option value="{{ area }}" selected hidden>{{ area }}</option>
                        {% else %}
                            <option value="{{ area }}" selected disabled hidden>ì§€ì—­ ì„ íƒ</option>
                        {% endif %}
                    </div>
                    <div>
                        <option value="">ì „ì²´</option>
                        {% for i in areas %}
                            <option value="{{ i }}">{{ i }}</option>
                        {% endfor %}
                    </div>
                </select>
                <!-- TODO: multiple ì†ì„± ë„£ê¸°  -->
                <!--? íƒ€ì… í•„í„° -->
                <select name="type" style="width: 100px; height: 30px; margin-top: 4px">
                    <div>
                        {% if type %}
                            <!-- disabled ì†ì„±ì„ ì œê±°í•˜ì—¬ í´ë¦­í•˜ì§€ ì•Šì•„ë„ ê³„ì†í•´ì„œ ê°’ì„ ì´ê²ƒìœ¼ë¡œ ê°€ì§€ë„ë¡ í•¨) -->
                            <option value="{{ type }}" selected hidden>{{ type }}</option>
                        {% else %}
                            <option value="{{ type }}" selected disabled hidden>ê°€ê²Œ ì¢…ë¥˜</option>
                        {% endif %}
                    </div>
                    <div>
                        <option value="">ì „ì²´</option>
                        {% for t in types %}
                            <option value="{{ t }}">{{ t }}</option>
                        {% endfor %}
                    </div>
                </select>
                <!--? ì‹œê°„ í•„í„° -->
                <select name="timefromnow" style="width: 120px; height: 30px; margin-top: 4px">
                    <div>
                        {% if timefromnow %}
                            <option value="{{ timefromnow }}" selected hidden>{{ timefromnow }}ì‹œê°„ ì´ìƒ</option>
                        {% else %}
                            <option value="" selected disabled hidden>ë‚¨ì€ ì˜ì—…ì‹œê°„</option>
                        {% endif %}
                    </div>
                    <div>
                        <option value="">ì „ì²´</option>
                        {% for t in [[2, '2ì‹œê°„ ì´ìƒ'], [3, '3ì‹œê°„ ì´ìƒ'], [4, '4ì‹œê°„ ì´ìƒ']] %}
                            <option value="{{ t[0] }}">{{ t[1] }}</option>
                        {% endfor %}
                    </div>
                </select>
                <input type="submit" value="ì´ë™" class="btn btn-primary mx-1" >
            </div>
        </form>
        <br>
        <br>
        <div>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th scope="col" id="" colspan="1"></th>
                        <th scope="col" id="open_shop_li" colspan="4">ì˜ì—… ì¤‘ì¸ ìˆ ì§‘ ê²€ìƒ‰</th>
                        <th scope="col" id="favorite_shop" colspan="3">ë‚˜ì˜ ì¦ê²¨ì°¾ê¸°</th>
                        <th scope="col" id="" colspan="1"></th>
                    </tr>
                </thead>
                <tr>
                    <th scope="col" width="80">ì¦ê²¨ì°¾ê¸°</th>
                    <th scope="col" width="110">ìƒì  ëª…</th>
                    <th scope="col" width="80">ë³„ì </th>
                    <th scope="col" width="80">ì˜ì—… ì—¬ë¶€</th>
                    <th scope="col" width="80">ê°€ê²Œ ì¢…ë¥˜</th>
                    <th scope="col" width="120">ì˜ì—… ì‹œê°„<br>(ì˜¤ëŠ˜: {{ today_yoil }})</th>
                    <th scope="col" width="150">ê°€ê²Œ ì—°ë½ì²˜</th>
                    <th scope="col" width="150">ê°€ê²Œ ì£¼ì†Œ</th>
                    <th scope="col" width="80">ì‹ ê³ </th>
                </tr>

                <tbody class="table-group-divider">
                    {% for shop in shopdata %}
                    <tr>
                        <td><img src="{{ url_for('static', filename='IMG/star/empty_yellow_star.png') }}" alt="star_img" width="20" ></td>
                        <td><a href="https://map.naver.com/v5/search/{{ shop['name'] }}/place" target="_blank">{{ shop['name'] }}</a></td>
                        <td>{{ shop['star_rating'] }}</td>
                        <td>{{ shop['status'] }}</td>
                        <td>{{ shop['type'] }}</td>
                        <td>{{ shop[today_yoil + "opening_hours"] }}</td>
                        <td>{{ shop['contact'] }}</td>
                        <td><a href="https://map.naver.com/v5/directions/-/14129228.684381623,4517601.068035996,{{ area }} {{ shop['name'] }},1151030658,PLACE_POI/-/transit?c=15,0,0,0,dh&isCorrectAnswer=true" target="_blank" >{{ shop['address'] }}</a></td>
                        <td><a style="color: crimson" href="/singo?area={{ area }}&name={{ shop['name'] }}" target="_blank">ì‹ ê³ í•˜ê¸°</a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <nav aria-label="Page navigation example">
            <ul class="pagination" style="justify-content : center;">
                {% if move_page_front %}
                    <li class="page-item"><a class="page-link" href='/?search={{ search }}&area={{ area }}&type={{ type }}&timefromnow={{ timefromnow }}&page={{ 1 }}'><span aria-hidden="true">&laquo;&laquo;</span></a></li>
                    <li class="page-item"><a class="page-link" href='/?search={{ search }}&area={{ area }}&type={{ type }}&timefromnow={{ timefromnow }}&page={{ page-5 }}'><span aria-hidden="true">&laquo;</span></a></li>
                {% endif %}
                {% for p in range(pagination_start, pagination_end+1) %}
                    <li class="page-item"><a class="page-link" href='/?search={{ search }}&area={{ area }}&type={{ type }}&timefromnow={{ timefromnow }}&page={{ p }}'>
                        {% if page == p %}
                            <strong><mark>
                                {% endif %}
                                {{ p }}
                                {% if page == p %}
                            </strong></mark>
                        {% endif %}
                    </a></li>
                {% endfor %}
                {% if move_page_back %}
                    <li class="page-item"><a class="page-link" href='/?search={{ search }}&area={{ area }}&type={{ type }}&timefromnow={{ timefromnow }}&page={{ page+5 }}'><span aria-hidden="true">&raquo;</span></a></li>
                    <li class="page-item"><a class="page-link" href='/?search={{ search }}&area={{ area }}&type={{ type }}&timefromnow={{ timefromnow }}&page={{ total_page }}'><span aria-hidden="true">&raquo;&raquo;</span></a></li>
                {% endif %}
            </ul>
        </nav>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
</body>
</html>